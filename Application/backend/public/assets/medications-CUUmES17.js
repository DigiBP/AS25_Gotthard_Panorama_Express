import{m as p,r as u,c as w}from"./index-DG90UNWf.js";const F=p("medications",()=>{const n=u([]),a=u([]),o=u(!1),i=u(null),d=w(()=>n.value.map(e=>{const t=[e.name];e.dosage&&t.push(e.dosage),e.quantity&&!e.dosage&&t.push(e.quantity);const r=a.value.filter(l=>l.medicationId===e.medicationId).reduce((l,g)=>l+(g.amount||0),0),I=a.value.find(l=>l.medicationId===e.medicationId)?.unit||"";return{label:t.join(" â€” "),value:e.medicationId,meta:e,availableAmount:r,unit:I}}));async function c(){o.value=!0,i.value=null;try{const e=await fetch("/api/medications",{method:"GET"});if(!e.ok)throw new Error(`Failed to fetch medications (${e.status})`);const t=await e.json();return n.value=Array.isArray(t)?t:[],console.log(t),n.value}catch(e){return console.error(e),i.value=e?.message||"Failed to load medications",n.value=[],n.value}finally{o.value=!1}}async function s(){o.value=!0,i.value=null;try{const e=await fetch("/api/inventory",{method:"GET"});if(!e.ok)throw new Error(`Failed to fetch inventory (${e.status})`);const t=await e.json();return a.value=Array.isArray(t)?t:[],console.log(t),a.value}catch(e){return console.error(e),i.value=e?.message||"Failed to load inventory",a.value=[],a.value}finally{o.value=!1}}c(),s();function v(e){return n.value.find(t=>t.medicationId===e)||null}function f(){return Promise.all([c(),s()])}function m(e){return a.value.filter(t=>t.medicationId===e)}function y(e){return a.value.filter(t=>t.medicationId===e).reduce((t,r)=>t+(r.amount||0),0)}function h(e){const t=a.value.find(r=>r.medicationId===e);return t?t.id:null}return{medications:n,inventory:a,options:d,loading:o,error:i,byId:v,refresh:f,fetchMedicalData:c,fetchInventory:s,getInventoryForMedication:m,getTotalAvailable:y,getFirstInventoryId:h}});export{F as u};
