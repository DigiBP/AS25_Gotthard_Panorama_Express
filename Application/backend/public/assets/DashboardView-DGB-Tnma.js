import{_ as w,c as _,r as f,o as C,a as N,b as r,d as e,e as p,u as i,t,F as b,f as k,w as R,g as l,h as x}from"./index-DG90UNWf.js";import{u as D}from"./medications-CUUmES17.js";import{u as M}from"./orders-CiJExhQP.js";const S={class:"view dashboard-view"},V={class:"orders-block"},B={style:{display:"flex","justify-content":"space-between","align-items":"center"}},E=["disabled"],L={key:0,class:"muted"},F={key:1,class:"error-msg"},U={key:2,class:"muted"},j=["onClick"],A={class:"modal"},H={class:"modal-header"},T={class:"muted"},$={class:"table"},q={__name:"DashboardView",setup(z){const n=M(),y=D(),c=_(()=>n.orders),u=f(null),m=f(!1),o=_(()=>u.value?n.getOrder(u.value):null);let h=null;function O(d){u.value=d,m.value=!0}function v(){m.value=!1,u.value=null}async function g(){await n.refresh()}function I(d){const a=y.medications.find(s=>s.medicationId===d);return a?a.name:d}return C(()=>{h=setInterval(()=>{n.fetchOrders()},3e4)}),N(()=>{h&&clearInterval(h)}),(d,a)=>(l(),r("div",S,[a[2]||(a[2]=e("h1",null,"Dashboard",-1)),e("section",V,[e("div",B,[a[0]||(a[0]=e("div",null,[e("h2",null,"Recent Orders"),e("p",{class:"muted"},"Open and inspect recent orders created in the prototype.")],-1)),e("button",{onClick:g,disabled:i(n).loading,class:"refresh-btn"},t(i(n).loading?"Refreshing...":"Refresh"),9,E)]),i(n).loading&&c.value.length===0?(l(),r("div",L,"Loading orders...")):i(n).error?(l(),r("div",F,t(i(n).error),1)):c.value.length===0?(l(),r("div",U,"No orders yet.")):p("",!0),e("ul",null,[(l(!0),r(b,null,k(c.value,s=>(l(),r("li",{key:s.id},[e("strong",null,"Order #"+t(s.id),1),x(" — Date: "+t(s.date)+" — "+t(s.isRush?"RUSH":"Normal")+" — Ordered by: "+t(s.name)+" ("+t(s.isInternal?"Internal":"External")+") ",1),e("button",{onClick:G=>O(s.id)},"Open",8,j)]))),128))]),m.value?(l(),r("div",{key:3,class:"modal-backdrop",onClick:R(v,["self"])},[e("div",A,[e("header",H,[e("h3",null,"Order #"+t(o.value?.id),1),e("button",{class:"close-btn",onClick:v},"×")]),e("p",T," Date: "+t(o.value?.date)+" — Ordered by: "+t(o.value?.name)+" ("+t(o.value?.isInternal?"Internal":"External")+") — "+t(o.value?.isRush?"Rush":"Normal"),1),e("table",$,[a[1]||(a[1]=e("thead",null,[e("tr",null,[e("th",null,"Medication ID"),e("th",null,"Medication Name"),e("th",null,"Amount")])],-1)),e("tbody",null,[(l(!0),r(b,null,k(o.value?.medications||[],s=>(l(),r("tr",{key:s.medicationId},[e("td",null,t(s.medicationId),1),e("td",null,t(I(s.medicationId)),1),e("td",null,t(s.amount),1)]))),128))])]),e("div",{class:"modal-actions"},[e("button",{onClick:v},"Close")])])])):p("",!0)])]))}},Q=w(q,[["__scopeId","data-v-b33fca09"]]);export{Q as default};
