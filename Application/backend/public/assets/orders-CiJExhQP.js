import{m as v,r as d}from"./index-DG90UNWf.js";const m=v("orders",()=>{const t=d([]),n=d(!1),o=d(null);async function a(){n.value=!0,o.value=null;try{const e=await fetch("/api/orders",{method:"GET"});if(!e.ok)throw new Error(`Failed to fetch orders (${e.status})`);const r=await e.json();return console.log("Fetched orders:",r),t.value=Array.isArray(r)?r:[],t.value}catch(e){return console.error(e),o.value=e?.message||"Failed to load orders",t.value=[],t.value}finally{n.value=!1}}a();function u(e){const r=`ord-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,s=new Date().toISOString(),l={id:r,createdAt:s,...e};return t.value.unshift(l),l}function i(e){return t.value.find(r=>r.id===e)||null}function c(e){const r=t.value.findIndex(s=>s.id===e);r!==-1&&t.value.splice(r,1)}async function f(){return await a()}return{orders:t,loading:n,error:o,addOrder:u,getOrder:i,removeOrder:c,fetchOrders:a,refresh:f}});export{m as u};
